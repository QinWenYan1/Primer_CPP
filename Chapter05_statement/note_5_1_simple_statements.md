# 📘 5.1 简单语句 (Simple Statements)

> 来源说明：C++ Primer 第5章第1节 | 本节涵盖：C++中的表达式语句、空语句和复合语句（块）的基本概念和使用场景

---

## 🧠 本节核心概念（提纲目录）
*   表达式语句 (Expression Statements)
*   空语句 (Null Statements)
*   空语句的陷阱 (Missing or Extraneous Semicolons)
*   复合语句/块 (Compound Statements / Blocks)

---

## ✅ 表达式语句 (Expression Statements)
**定义 / 理论**
*   大多数C++语句以分号结尾。
*   表达式后面跟一个分号就构成了**表达式语句**。
*   表达式语句会被求值，但其结果会被**丢弃**。
*   有副作用的表达式语句（如赋值、打印）才是有用的。

**教材示例代码 / 过程**
```cpp
ival + 5;    // 无用的表达式语句：计算了结果但立即丢弃
cout << ival; // 有用的表达式语句：有副作用（输出值）
```

---

## ✅ 空语句 (Null Statements)
**定义 / 理论**
*   最简单的语句，就是一个单独的分号 `;`。
*   用在语言语法要求需要一条语句，但程序逻辑不需要任何操作的地方。
*   常见场景：循环的所有工作已经在条件中完成时， 比如我们向读取一个输入流知道遇到某个特定值

**教材示例代码 / 过程**
```cpp
// 读取输入，直到遇到文件结束符或找到等于 sought 的值
while (cin >> s && s != sought)
    ; // 空语句 - 循环体不需要执行任何操作
```

**注意点**
*   💡 **最佳实践**：应该为空语句添加注释，明确告知读者这是有意为之的。
*   ⚠️ **空语句陷阱**：多余的分号可能完全改变程序语义。

---

## ✅ 空语句的陷阱 (Missing or Extraneous Semicolons)
**定义 / 理论**
*   由于空语句是合法语句，多余的分号可能被解释为空语句，导致逻辑错误。
*   在 `while` 或 `if` 条件后多余的分号是常见错误来源。

**教材示例代码 / 过程**
```cpp
// 灾难：多余的分号 - 循环体就是这个空语句
while (iter != svec.end()) ; // 注意此处的分号：循环体是空语句
    ++iter;    // 此递增操作不是循环的一部分！（尽管缩进如此暗示）
```

**注意点**
*   ⚠️ **警告**：多余的空语句并不总是无害的，可能导致无限循环或逻辑错误。
*   💡 仔细检查循环和条件语句后的分号使用。

---

## ✅ 复合语句/块 (Compound Statements / Blocks)
**定义 / 理论**
*   由一对花括号 `{}` 包围的语句和声明序列。
*   也称为**块**，是一个作用域。
*   块内声明的名字只能在该块及其嵌套块内访问。
*   用于语言要求单一语句但程序逻辑需要多条语句时。

**教材示例代码 / 过程**
```cpp
// 需要执行多条语句，但while循环只能接受一条语句作为体
while (val <= 10) {
    sum += val;   // 将 sum + val 赋值给 sum
    ++val;        // val 加 1
} // 块结束 - 不需要分号
```

**注意点**
*   ⚠️ 块**不以分号结束**（右花括号后没有分号）。
*   💡 空块 `{}` 等价于空语句，可用于相同场景。
*   ⚠️ 块会创建一个新的作用域，内部声变量在块外不可访问。

---

## 🔑 本节总结
1.  **表达式语句**由表达式加分号组成，结果被丢弃，只有有副作用的语句才有用。
2.  **空语句**是单独的分号，用于语法需要但逻辑不需要语句的地方，应添加注释说明。
3.  **多余分号**是常见错误源，特别是在循环和条件语句后，会创建意外的空语句。
4.  **复合语句/块**用花括号将多条语句组合成单一语句，同时创建新的作用域。
5.  块**不需要以分号结束**，这是与普通语句的重要区别。

---

## 📌 考试速记版
*   **表达式语句** = 表达式 + `;` (结果被丢弃)
*   **空语句** = `;` (需加注释 `;// 有意为之`)
*   **陷阱**：`while(condition);` → 循环体是空语句！
*   **复合语句** = `{ statements }` (无结束分号)
*   **作用域**：块内声明的变量在块外不可见
*   **口诀**："表达式语句看副作用，空语句要小心，多余分号是大敌，花括号创作用域"