# 📘 Chapter Summary & Defined Terms 术语总览（完整收录版）

> 基于《C++ Primer》第五版 Chapter 4 Expressions。覆盖本章提到的所有定义性术语。
> 每个术语一句话解释，方便复习与查阅。

---

## 🔑 Chapter Summary

*   **表达式 (Expression)**：C++程序计算的基本单位，通过运算符操作一个或多个操作数，并产生一个结果。
*   **运算符重载 (Operator Overloading)**：允许为类类型定义运算符的含义。
*   **优先级与结合性 (Precedence & Associativity)**：决定复合表达式中运算符的分组和求值顺序。
*   **操作数求值顺序 (Order of Operand Evaluation)**：大多数运算符不指定其操作数的求值顺序，编译器可以自由选择先求值左操作数还是右操作数。
*   **类型转换 (Conversions)**：值从一种类型自动或显式地转换为另一种类型的过程，包括内置类型和类类型。

---

## 📚 Defined Terms 全部收录

### 核心概念
*   **expression**：C++程序中计算的基本层级。表达式通常对一个或多个操作数应用一个运算符。每个表达式产生一个结果。表达式可用作操作数，因此我们能写出需要计算多个运算符的复合表达式。
*   **result**：通过计算表达式获得的值或对象。
*   **operands**：表达式操作的值。每个运算符都有一个或多个与之关联的操作数。
*   **operator**：决定表达式执行何种操作的符号。语言定义了一组运算符及其应用于内置类型值时的含义。还定义了每个运算符的优先级和结合性，并指定每个运算符接受多少操作数。运算符可以被重载并应用于类类型的值。
*   **compound expression**：涉及多个运算符的表达式。

### 求值规则
*   **precedence**：定义复合表达式中不同运算符的分组顺序。优先级高的运算符比优先级低的运算符分组更紧密。
*   **associativity**：决定具有相同优先级的运算符如何分组。运算符可以是右结合（运算符从右向左分组）或左结合（运算符从左向右分组）。
*   **order of evaluation**：运算符的操作数被求值的顺序（如果有的话）。大多数情况下，编译器可以自由地以任何顺序求值操作数。然而，操作数总是在运算符本身被求值之前求值。只有 `&&`、`||`、`?:` 和逗号运算符指定了其操作数的求值顺序。
*   **short-circuit evaluation**：用于描述逻辑*与*和逻辑*或*运算符执行方式的术语。如果这些运算符的第一个操作数足以确定整体结果，则求值停止。我们保证第二个操作数不会被求值。

### 类型转换
*   **conversion**：一种类型的值转换为另一种类型值的过程。语言定义了内置类型之间的转换。与类类型之间的转换也是可能的。
*   **implicit conversion**：由编译器自动生成的转换。给定一个需要特定类型但其操作数类型不同的表达式，如果存在适当的转换，编译器会自动将操作数转换为所需类型。
*   **arithmetic conversion**：从一种算术类型到另一种算术类型的转换。在二元算术运算符的上下文中，算术转换通常通过将较小类型转换为较大类型来尝试保留精度（例如，整型转换为浮点类型）。
*   **integral promotions**：将较小的整型转换为其最接近的较大整型的转换。小整型（如 short、char 等）的操作数总是被提升，即使在可能不需要这种转换的上下文中也是如此。
*   **promoted**：参见整型提升 (integral promotions)。
*   **cast**：显式转换。
*   **const_cast**：一种转换，将底层 const 对象转换为相应的非 const 类型，反之亦然。
*   **dynamic_cast**：与继承和运行时类型识别结合使用。
*   **reinterpret_cast**：将操作数的内容解释为不同的类型。本质上是机器相关的且危险的。
*   **static_cast**：对明确定义的类型转换的显式请求。通常用于覆盖编译器本会执行的隐式转换。

### 值与对象
*   **lvalue**：产生一个对象或函数的表达式。一个表示对象的非常量 (nonconst) 左值可能是赋值的左操作数。
*   **rvalue**：产生一个值但不产生该值关联位置（如果有的话）的表达式。

### 运算符详解
*   **unary operators**：接受单个操作数的运算符。
*   **binary operators**：接受两个操作数的运算符。
*   **overloaded operator**：定义为供类类型使用的运算符版本。
*   **sizeof**：返回存储给定类型名称或给定表达式类型的对象所需字节大小的运算符。
*   **comma operator (,)**：逗号运算符。从左到右求值的二元运算符。逗号表达式的结果是右操作数的值。当且仅当该操作数是左值时，结果才是左值。
*   **conditional operator (?:)**：条件运算符。提供形式为 `cond ? expr1 : expr2;` 的 if-then-else 表达式。如果条件 cond 为真，则计算 expr1。否则，计算 expr2。expr1 和 expr2 的类型必须相同或可转换为公共类型。只计算 expr1 或 expr2 中的一个。
*   **logical AND operator (&&)**：逻辑*与*运算符。如果两个操作数都为 `true`，则结果为 `true`。仅当左操作数为 `true` 时才计算右操作数。
*   **bitwise AND operator (&)**：按位*与*运算符。生成一个新的整数值，如果两个操作数在某个位位置都是 1，则该位为 1；否则该位为 0。
*   **bitwise exclusive OR operator (^)**：按位异或运算符。生成一个新的整数值，如果两个操作数中有且仅有一个在某个位位置包含 1，则该位为 1；否则该位为 0。
*   **logical OR operator (||)**：逻辑*或*运算符。如果任一操作数为 `true`，则结果为 `true`。仅当左操作数为 `false` 时才计算右操作数。
*   **bitwise OR operator (|)**：按位或运算符。生成一个新的整数值，如果任一操作数在某个位位置是 1，则该位为 1；否则该位为 0。
*   **increment operator (++)**：递增运算符。有前缀和后缀两种形式。前缀递增产生一个左值。它将操作数加 1 并返回操作数更改后的值。后缀递增产生一个右值。它将操作数加 1 并返回操作数原始未更改值的副本。注意：迭代器有 `++`，即使它们没有 `+` 运算符。
*   **decrement operator (--)**：递减运算符。有前缀和后缀两种形式。前缀递减产生一个左值。它将操作数减 1 并返回操作数更改后的值。后缀递减产生一个右值。它将操作数减 1 并返回操作数原始未更改值的副本。注意：迭代器有 `--`，即使它们没有 `-` 运算符。
*   **left-shift operator (<<)**：左移运算符。将左操作数值的（可能提升后的）副本中的位向左移动。移动的位数由右操作数指定。右操作数必须为零或正数，并且严格小于结果中的位数。左操作数应为 `unsigned`，如果左操作数是 `signed`，则如果移位导致不同位移入符号位，其行为是未定义的。
*   **right-shift operator (>>)**：右移运算符。类似于左移运算符，但位是向右移动的。如果左操作数是有符号的，移入结果的位是 0 还是符号位的副本是由实现定义的。
*   **bitwise NOT operator (~)**：按位非运算符。生成一个新的整数值，其中每一位都是（可能提升后的）操作数中对应位的反转副本。
*   **logical NOT operator (!)**：逻辑非运算符。返回其操作数 `bool` 值的反义。如果操作数为 `false` 则结果为 `true`，反之亦然。

---

## 📌 高频考点提炼（考试速记版）

> **口诀记忆 + 高频考点归纳**

### 🌟 核心口诀

1.  **表达式求值三要素**：优先级定分组，结合性定方向（同优先级），求值顺序多不定（除 `&&`、`||`、`?:`、`,`）。
2.  **短路求值是关键**：`&&` 遇 `false` 就停，`||` 遇 `true` 就停。
3.  **左值右值要分清**：左值有身份（可取地址），右值纯数据（临时值）。前置 `++/--` 返左值，后置 `++/--` 返右值。
4.  **类型转换时时发生**：小整型总被提升 (Integral Promotion)，算术转换向大看齐 (Usual Arithmetic Conversions)。
5.  **四大 cast 需牢记**：
    *   `static_cast`：明转 well-defined 类型。
    *   `const_cast`：专攻 `const` 和 `volatile`。
    *   `dynamic_cast`：安全向下转型（需多态）。
    *   `reinterpret_cast`：底层重解释（危险！平台相关）。
6.  **移位操作数需谨慎**：右操作数必须非负且小于位数；左操作数最好为无符号，有符号移位结果未定义或实现定义。

---
### 🎯 高频考点速览表

| 分类 | 高频考点 | 速记说明 |
| :--- | :--- | :--- |
| **求值规则** | 优先级 & 结合性 | 决定运算符分组和计算顺序 |
| | 操作数求值顺序 | 大多数不指定，`&&` `||` `?:` `,` 指定 |
| | 短路求值 (Short-circuit) | `&&` 左假则停，`||` 左真则停 |
| **类型转换** | 整型提升 (Integral Promotion) | `char`, `short` 等总是提升为 `int` 等 |
| | 算术转换 (Arithmetic Conversion) | 向精度更高、范围更大的类型转换 |
| | `static_cast` | 明确的、well-defined 的类型转换 |
| | `const_cast` | 移除或添加 `const`（或 `volatile`）属性 |
| **运算符特性**| 递增/递减 (++/--) | 前缀返左值，后缀返右值 |
| | 位运算符 (& \| ^ ~) | 操作整数位模式，注意符号位 |
| | 移位运算符 (<< >>) | 右操作数限制；有符号左操作数行为未定义/实现定义 |
| **值与结果** | 左值 (lvalue) / 右值 (rvalue) | 身份 vs 数据；可被赋值 vs 临时值 |
| | 表达式结果 | 表达式计算后产生的值或对象 |

---