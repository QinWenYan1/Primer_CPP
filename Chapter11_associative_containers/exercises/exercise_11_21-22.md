## ğŸ“Š ç»ƒä¹ æ‰¹æ”¹ä¸åˆ†æ

### Exercise 11.21 è§£é‡Šæ’å…¥ä¸é€’å¢çš„ç»„åˆæ“ä½œ

**åŸé¢˜ï¼š** Assuming word_count is a map from string to size_t and word is a string, explain the following loop:

```
while (cin >> word)
    ++word_count.insert({word, 0}).first->second;
```

**ä½ çš„ç­”æ¡ˆï¼š**
```
å°†æ ‡å‡†è¾“å…¥çš„å•è¯å’Œå•è¯å‡ºç°é¢‘ç‡ä¸€ä¸ªä¸€ä¸ªå…¨éƒ¨è®°å…¥åˆ°è¡¨æ ¼ä¸­ï¼Œå¦‚æœè¯¥å•è¯å·²ç»å‡ºç°è¿‡ï¼Œæ— éœ€åœ¨
æ·»åŠ å…¥è¡¨æ ¼ç›´æ¥åœ¨å…¶pairé‡Œé¢å¯¹åº”çš„é¢‘ç‡åŠ ä¸€ï¼Œ å¦‚æœæœªå‡ºç°è¿‡ï¼Œ åˆ™å…ˆåˆ›å»ºï¼Œå†å°†é¢‘ç‡è°ƒæ•´ä¸º1
```

**æ‰¹æ”¹ï¼š** â­â­â­â­ 4/5 ä¼˜ç§€ç­”æ¡ˆï¼æ ¸å¿ƒæ¦‚å¿µç†è§£æ­£ç¡®ï¼Œä½†å¯ä»¥æ›´è¯¦ç»†åœ°è§£é‡Šè¡¨è¾¾å¼çš„å·¥ä½œåŸç†

**è¯¦ç»†åˆ†æï¼š**
- âœ… **æ ¸å¿ƒåŠŸèƒ½ç†è§£æ­£ç¡®**ï¼šå‡†ç¡®ç†è§£äº†è¿™æ˜¯å•è¯è®¡æ•°ç¨‹åº
- âœ… **æ’å…¥è¡Œä¸ºç†è§£æ­£ç¡®**ï¼šç†è§£åˆ°å·²å­˜åœ¨æ—¶ä¸é‡å¤æ’å…¥ï¼Œä¸å­˜åœ¨æ—¶åˆ›å»ºæ–°æ¡ç›®
- âœ… **è®¡æ•°é€»è¾‘æ­£ç¡®**ï¼šç†è§£åˆ°å·²å­˜åœ¨æ—¶é€’å¢è®¡æ•°ï¼Œæ–°æ’å…¥æ—¶ä»0å˜ä¸º1
- âš ï¸ **è¡¨è¾¾å¼è§£æä¸å¤Ÿè¯¦ç»†**ï¼šå¯ä»¥æ›´è¯¦ç»†è§£é‡Š`insert`è¿”å›å€¼å’Œé“¾å¼æ“ä½œ

**å®Œæ•´è§£é‡Šï¼š**
è¿™ä¸ªå¾ªç¯æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„å•è¯è®¡æ•°å®ç°ï¼Œå…¶å·¥ä½œåŸç†å¦‚ä¸‹ï¼š

### 1. è¡¨è¾¾å¼åˆ†è§£
```cpp
// åˆ†è§£æ­¥éª¤ï¼š
1. word_count.insert({word, 0})      // å°è¯•æ’å…¥pair(word, 0)
2. .first                           // è·å–è¿”å›pairçš„ç¬¬ä¸€ä¸ªæˆå‘˜ï¼ˆè¿­ä»£å™¨ï¼‰
3. ->second                         // é€šè¿‡è¿­ä»£å™¨è®¿é—®å…ƒç´ çš„secondæˆå‘˜ï¼ˆè®¡æ•°å€¼ï¼‰
4. ++                               // é€’å¢è¯¥è®¡æ•°å€¼
```

### 2. insertæ–¹æ³•çš„è¿”å›å€¼
`map::insert`è¿”å›ä¸€ä¸ª`pair<iterator, bool>`ï¼š
- `first`ï¼šæŒ‡å‘æ’å…¥ä½ç½®ï¼ˆæˆ–å·²å­˜åœ¨å…ƒç´ ä½ç½®ï¼‰çš„è¿­ä»£å™¨
- `second`ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æˆåŠŸæ’å…¥äº†æ–°å…ƒç´ 

### 3. ä¸¤ç§æƒ…å†µçš„è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹
```cpp
// æƒ…å†µ1ï¼šå•è¯ä¸å­˜åœ¨ï¼ˆé¦–æ¬¡å‡ºç°ï¼‰
// insert({word, 0}) â†’ æ’å…¥æ–°å…ƒç´ {word, 0}ï¼Œè¿”å›çš„è¿­ä»£å™¨æŒ‡å‘æ–°å…ƒç´ ï¼Œboolä¸ºtrue
// ++æ“ä½œå°†æ–°å…ƒç´ çš„secondä»0é€’å¢ä¸º1

// æƒ…å†µ2ï¼šå•è¯å·²å­˜åœ¨
// insert({word, 0}) â†’ å°è¯•æ’å…¥å¤±è´¥ï¼ˆé”®å·²å­˜åœ¨ï¼‰ï¼Œè¿”å›çš„è¿­ä»£å™¨æŒ‡å‘å·²æœ‰å…ƒç´ ï¼Œboolä¸ºfalse
// ++æ“ä½œå°†å·²æœ‰å…ƒç´ çš„secondé€’å¢1
```

### 4. ç­‰æ•ˆä»£ç 
```cpp
// ä¸Šè¿°å•è¡Œä»£ç ç­‰æ•ˆäºï¼š
auto result = word_count.insert({word, 0});  // å°è¯•æ’å…¥
auto iter = result.first;                    // è·å–è¿­ä»£å™¨
++iter->second;                              // é€’å¢è®¡æ•°å€¼
```

### 5. ä¸ä¼ ç»Ÿä¸‹æ ‡æ“ä½œçš„å¯¹æ¯”
```cpp
// ä¼ ç»Ÿä¸‹æ ‡æ“ä½œï¼š
++word_count[word];  // ç®€æ´ä½†æ•ˆç‡ç¨ä½

// åŒºåˆ«ï¼š
// ä¸‹æ ‡æ“ä½œï¼š1) æŸ¥æ‰¾é”®ï¼Œ2) ä¸å­˜åœ¨åˆ™æ’å…¥é»˜è®¤å€¼0ï¼Œ3) è¿”å›å¼•ç”¨ï¼Œ4) é€’å¢
// insertæ“ä½œï¼š1) å°è¯•æ’å…¥0ï¼Œ2) è¿”å›è¿­ä»£å™¨ï¼Œ3) é€’å¢
// insertæ–¹æ³•é¿å…äº†ä¸å¿…è¦çš„é»˜è®¤æ„é€ ï¼Œæ€§èƒ½ç¨ä¼˜
```
---

## ğŸ“Š ç»ƒä¹ æ‰¹æ”¹ä¸åˆ†æ

### Exercise 11.22 mapæ’å…¥æ“ä½œçš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹

**åŸé¢˜ï¼š** Given a `map<string, vector<int>>`, write the types used as an argument and as the return value for the version of insert that inserts one element.

**ä½ çš„ç­”æ¡ˆï¼š**
```
è¿™ä¸ªinsertç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹ï¼š
    `pair<const string, vector<int>>`
è¿™ä¸ªæ˜¯insertè¿”å›çš„ç±»å‹
    `pair<map<const string, vector<int>>::interator, bool>`
```

**æ‰¹æ”¹ï¼š** â­â­â­ 3/5 è‰¯å¥½ç­”æ¡ˆï¼Œæ ¸å¿ƒæ¦‚å¿µåŸºæœ¬æ­£ç¡®ï¼Œä½†å­˜åœ¨ç»†èŠ‚é—®é¢˜

**è¯¦ç»†åˆ†æï¼š**
- âœ… **å‚æ•°ç±»å‹æ­£ç¡®**ï¼šå‡†ç¡®å†™å‡ºäº†insertå‚æ•°çš„ç±»å‹
- âš ï¸ **è¿”å›ç±»å‹åŸºæœ¬æ­£ç¡®**ï¼šç†è§£äº†è¿”å›ç±»å‹çš„åŸºæœ¬ç»“æ„
- âŒ **æ‹¼å†™é”™è¯¯**ï¼š`interator`åº”ä¸º`iterator`
- âš ï¸ **è¿”å›ç±»å‹ç»†èŠ‚åå·®**ï¼šå®¹å™¨ç±»å‹ä¸­ä¸åº”åŒ…å«`const`

**æ­£ç¡®ç­”æ¡ˆï¼š**

### 1. æ’å…¥æ“ä½œçš„å‚æ•°ç±»å‹
```cpp
// å¯¹äº map<string, vector<int>>
// å‚æ•°ç±»å‹ï¼šstd::pair<const std::string, std::vector<int>>
// è¿™æ˜¯mapçš„value_type
using ArgumentType = std::pair<const std::string, std::vector<int>>;
```

### 2. æ’å…¥æ“ä½œçš„è¿”å›å€¼ç±»å‹
```cpp
// å¯¹äº map<string, vector<int>>
// è¿”å›å€¼ç±»å‹ï¼šstd::pair<std::map<std::string, std::vector<int>>::iterator, bool>
// æˆ–è€…æ›´ç®€æ´åœ°ï¼šstd::pair<iterator, bool>
using ReturnType = std::pair<std::map<std::string, std::vector<int>>::iterator, bool>;
```

---