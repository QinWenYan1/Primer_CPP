## ğŸ“Š ç»ƒä¹ æ‰¹æ”¹ä¸åˆ†æ

### Exercise 11.24 mapä¸‹æ ‡æ“ä½œ

**åŸé¢˜ï¼š** What does the following program do?
```cpp
map<int, int> m;
m[0] = 1;
```

**ä½ çš„ç­”æ¡ˆï¼š**
```
åˆå§‹åŒ–ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸ºpair<const int, int>çš„ç©ºmapï¼Œç„¶åé€šè¿‡ä¸‹æ ‡æ“ä½œç›´æ¥æ·»åŠ ä¸€ä¸ª{0,1}çš„pairè¿›å»
```

**æ‰¹æ”¹ï¼š** â­â­â­â­ 4/5 ä¼˜ç§€ç­”æ¡ˆï¼æ ¸å¿ƒæ¦‚å¿µç†è§£æ­£ç¡®

**è¯¦ç»†åˆ†æï¼š**
- âœ… **æ¦‚å¿µç†è§£æ­£ç¡®**ï¼šå‡†ç¡®ç†è§£äº†mapä¸‹æ ‡æ“ä½œä¼šæ’å…¥æ–°å…ƒç´ 
- âœ… **æè¿°åŸºæœ¬å‡†ç¡®**ï¼šçŸ¥é“æœ€ç»ˆç»“æœæ˜¯æ·»åŠ äº†{0, 1}é”®å€¼å¯¹
- âš ï¸ **å¯ä»¥æ›´ç²¾ç¡®**ï¼šéœ€è¦æ›´è¯¦ç»†æè¿°ä¸‹æ ‡æ“ä½œçš„å†…éƒ¨æœºåˆ¶

**æ­£ç¡®ç­”æ¡ˆï¼š**
1. åˆ›å»ºä¸€ä¸ªç©ºçš„`std::map<int, int>`å¯¹è±¡`m`
2. `m[0]`æ‰§è¡Œä¸‹æ ‡æ“ä½œï¼ŒæŸ¥æ‰¾é”®`0`
3. ç”±äº`m`ä¸ºç©ºï¼Œé”®`0`ä¸å­˜åœ¨ï¼Œæ‰€ä»¥ä¸‹æ ‡æ“ä½œä¼š**æ’å…¥ä¸€ä¸ªæ–°å…ƒç´ **ï¼Œé”®ä¸º`0`ï¼Œå€¼è¿›è¡Œ**å€¼åˆå§‹åŒ–**ï¼ˆå¯¹äº`int`ï¼Œåˆå§‹åŒ–ä¸º`0`ï¼‰
4. è¿”å›æ–°æ’å…¥å…ƒç´ å€¼çš„**å¼•ç”¨**
5. å°†å€¼`1`èµ‹å€¼ç»™è¿™ä¸ªå¼•ç”¨
6. æœ€ç»ˆmapä¸­åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼š`{0, 1}`


---

### Exercise 11.25 vectorä¸‹æ ‡æ“ä½œå¯¹æ¯”

**åŸé¢˜ï¼š** Contrast the following program with the one in the previous
```cpp
vector<int> v;
v[0] = 1;
```

**ä½ çš„ç­”æ¡ˆï¼š**
```
è®¿é—®ä¸å­˜åœ¨çš„å…ƒç´ å’Œå†…å­˜å±äºæœªå®šä¹‰è¡Œä¸ºï¼Œåº”è¯¥è¢«ç¦æ­¢ï¼Œå’Œä¸Šé¢çš„åŒºåˆ«å°±æ˜¯vectorå¹¶ä¸ä¼šè‡ªå·±å»ä¸»åŠ¨æ·»åŠ å…ƒç´ 
```

**æ‰¹æ”¹ï¼š** â­â­â­â­â­ 5/5 å®Œç¾ç­”æ¡ˆï¼

**è¯¦ç»†åˆ†æï¼š**
- âœ… **å®Œå…¨æ­£ç¡®**ï¼šå‡†ç¡®æŒ‡å‡ºäº†è¿™æ˜¯æœªå®šä¹‰è¡Œä¸º
- âœ… **å¯¹æ¯”æ¸…æ™°**ï¼šæ­£ç¡®åŒºåˆ†äº†mapå’Œvectorä¸‹æ ‡æ“ä½œçš„ä¸åŒè¡Œä¸º
- âœ… **å®‰å…¨æ„è¯†å¼º**ï¼šå¼ºè°ƒäº†åº”è¯¥é¿å…è¿™ç§æ“ä½œ

**æ­£ç¡®ç­”æ¡ˆï¼š**
1. åˆ›å»ºä¸€ä¸ªç©ºçš„`std::vector<int>`å¯¹è±¡`v`
2. `v[0]`è¯•å›¾è®¿é—®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½†vectorä¸ºç©ºï¼Œæ²¡æœ‰ç´¢å¼•ä¸º0çš„å…ƒç´ 
3. è¿™æ˜¯**æœªå®šä¹‰è¡Œä¸º**ï¼ˆundefined behaviorï¼‰ï¼Œå¯èƒ½å¯¼è‡´ï¼š
   - ç¨‹åºå´©æºƒï¼ˆsegmentation faultï¼‰
   - æ•°æ®æŸå
   - ä¸å¯é¢„æµ‹çš„ç¨‹åºè¡Œä¸º
4. ä¸mapä¸åŒï¼Œvectorçš„ä¸‹æ ‡æ“ä½œ**ä¸ä¼šè‡ªåŠ¨æ·»åŠ å…ƒç´ **


---

### Exercise 11.26 mapä¸‹æ ‡æ“ä½œçš„ç±»å‹

**åŸé¢˜ï¼š** What type can be used to subscript a map? What type does the subscript operator return? Give a concrete example â€” that is, define a map and then write the types that can be used to subscript the map and the type that would be returned from the subscript operator.

**ä½ çš„ç­”æ¡ˆï¼š**
```cpp
map<string, int> m; 
//type can be used to subscript: const string, const string &, string, string &
//type returned from that operator: map<string, int>::value_type ä¹Ÿå°±æ˜¯int
```

**æ‰¹æ”¹ï¼š** â­â­ 2/5 ç­”æ¡ˆå­˜åœ¨æ¦‚å¿µæ€§é”™è¯¯

**è¯¦ç»†åˆ†æï¼š**
- âœ… **ç¤ºä¾‹æ­£ç¡®**ï¼šæ­£ç¡®ç»™å‡ºäº†mapçš„å®šä¹‰
- âš ï¸ **å‚æ•°ç±»å‹éƒ¨åˆ†æ­£ç¡®**ï¼šä½†è¡¨è¿°ä¸å¤Ÿç²¾ç¡®
- âŒ **è¿”å›ç±»å‹é”™è¯¯**ï¼šmapä¸‹æ ‡æ“ä½œè¿”å›çš„æ˜¯`mapped_type&`ï¼Œä¸æ˜¯`value_type`

**æ­£ç¡®ç­”æ¡ˆï¼š**

å¯¹äº`std::map<std::string, int> m;`

### 1. å¯ç”¨äºä¸‹æ ‡çš„ç±»å‹
mapçš„ä¸‹æ ‡æ“ä½œæ¥å—`key_type`æˆ–å¯éšå¼è½¬æ¢ä¸º`key_type`çš„ç±»å‹ï¼š
- `std::string`ï¼ˆé”®ç±»å‹ï¼‰
- `const std::string`
- `const char*`ï¼ˆå¯éšå¼è½¬æ¢ä¸º`std::string`ï¼‰
- `std::string_view`ï¼ˆC++17èµ·ï¼Œå¯è½¬æ¢ä¸º`std::string`ï¼‰

### 2. ä¸‹æ ‡æ“ä½œè¿”å›çš„ç±»å‹
è¿”å›`mapped_type&`ï¼ˆå€¼çš„å¼•ç”¨ï¼‰ï¼Œå¯¹äº`map<string, int>`ï¼Œè¿”å›`int&`

**å®Œæ•´ç¤ºä¾‹ï¼š**
```cpp
#include <map>
#include <string>
#include <iostream>

int main() {
    std::map<std::string, int> m;
    
    // å¯ç”¨äºä¸‹æ ‡çš„ç±»å‹ç¤ºä¾‹
    std::string key1 = "hello";
    const std::string key2 = "world";
    const char* key3 = "cpp";
    
    // ä¸‹æ ‡æ“ä½œï¼Œè¿”å›int&
    int& val1 = m[key1];      // è¿”å›int&ï¼Œval1æ˜¯å¯¹mapä¸­å€¼çš„å¼•ç”¨
    const int& val2 = m[key2]; // ä¹Ÿå¯ä»¥ç»‘å®šåˆ°constå¼•ç”¨
    m[key3] = 42;             // è¿”å›int&ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼
    
    // ç±»å‹éªŒè¯
    static_assert(std::is_same_v<
        decltype(m[std::string("test")]), 
        int&>);  // è¿”å›int&
    
    static_assert(std::is_same_v<
        decltype(m["test"]), 
        int&>);  // è¿”å›int&
    
    return 0;
}
```
---