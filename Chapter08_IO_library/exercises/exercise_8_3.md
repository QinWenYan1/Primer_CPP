# ğŸ“˜ 8.1 The IO Classes ç»ƒä¹ é¢˜è¯„ä»·

## ğŸ“‹ æ€»ä½“æ¦‚è§ˆ

| é¢˜ç›® | å¾—åˆ† | è¯„ä»·æ‘˜è¦ |
|------|------|----------|
| Exercise 8.3 | â­â­â­â­ (4/5) | ç†è§£åŸºæœ¬æ­£ç¡®ï¼Œä½†å¯¹çŠ¶æ€ä½ç»†èŠ‚æŒæ¡ä¸å¤Ÿç²¾ç¡® |

## ğŸ¯ é€é¢˜è¯¦ç»†è¯„ä»·

### Exercise 8.3 Whileå¾ªç¯ç»ˆæ­¢æ¡ä»¶åˆ†æ

**åŸé¢˜ï¼š** What causes the following while to terminate?
```cpp
while (cin >> i) /* ... */
```

**ä½ çš„ç­”æ¡ˆï¼š**
```
åªè¦cin.fail()è¿”å›trueçš„æ—¶å€™å°±ä¼šæŠ¥é”™ï¼Œ
fail()è¿”å›trueçš„æƒ…å†µæœ‰å¤šç§ï¼Œ æ¯”å¦‚åˆ°è¾¾äº†end-of-fileçš„æƒ…å†µï¼Œæˆ–è€…æ—¶é‡åˆ°äº†erroråˆ°å€¼badbitå’Œfailbitçš„è¿™ä¸¤ä¸ªçŠ¶æ€ä½ä¸º1äº†éƒ½ä¼šå¯¼è‡´è¿™ä¸ªå¾ªç¯åœæ­¢
```

**æ‰¹æ”¹ç»“æœï¼š** â­â­â­â­ (4/5)
- **æ¦‚å¿µç†è§£ï¼š** â­â­â­â­ åŸºæœ¬ç†è§£æ­£ç¡®ï¼ŒçŸ¥é“fail()å‡½æ•°çš„ä½œç”¨
- **ä»£ç è´¨é‡ï¼š** â­â­â­â­ é€»è¾‘æè¿°æ¸…æ™°
- **é€»è¾‘å®Œæ•´ï¼š** â­â­â­ é—æ¼äº†é‡è¦ç»†èŠ‚
- **è¡¨è¾¾æ¸…æ™°ï¼š** â­â­â­â­ è¡¨è¾¾åŸºæœ¬æ¸…æ¥š

**æ­£ç¡®ç­”æ¡ˆï¼š**
```cpp
// while (cin >> i) åœ¨ä»¥ä¸‹æƒ…å†µç»ˆæ­¢ï¼š
// 1. é‡åˆ°æ–‡ä»¶ç»“æŸ(EOF) - è®¾ç½®eofbitå’Œfailbit
// 2. è¾“å…¥ç±»å‹ä¸åŒ¹é… - è®¾ç½®failbit  
// 3. ç³»ç»Ÿçº§IOé”™è¯¯ - è®¾ç½®badbit
// 4. ä»»ä½•å¯¼è‡´fail()è¿”å›trueçš„æƒ…å†µ
```

**çŸ¥è¯†ç‚¹è§£æï¼š**
- `while (cin >> i)` çš„æ¡ä»¶æ£€æŸ¥å®é™…ä¸Šç­‰ä»·äº `!cin.fail()`
- `fail()` å‡½æ•°åœ¨ `failbit` æˆ– `badbit` è¢«è®¾ç½®æ—¶è¿”å› `true`
- åˆ°è¾¾æ–‡ä»¶æœ«å°¾(EOF)æ—¶ï¼ŒåŒæ—¶è®¾ç½® `eofbit` å’Œ `failbit`
- è¾“å…¥ç±»å‹ä¸åŒ¹é…ï¼ˆå¦‚æœŸæœ›intä½†è¾“å…¥å­—ç¬¦ï¼‰æ—¶è®¾ç½® `failbit`
- ç³»ç»Ÿçº§é”™è¯¯ï¼ˆå¦‚ç£ç›˜è¯»å†™é”™è¯¯ï¼‰æ—¶è®¾ç½® `badbit`

**æ”¹è¿›å»ºè®®ï¼š**
- ğŸ’¡ éœ€è¦æ˜ç¡®åŒºåˆ†ï¼šEOFä¼šåŒæ—¶è®¾ç½®`eofbit`å’Œ`failbit`ï¼Œè€Œä¸ä»…ä»…æ˜¯`failbit`
- ğŸ’¡ å»ºè®®è®°ä½ï¼š`fail() = (failbit || badbit)`ï¼Œ`good() = !fail() && !eof()`
- ğŸ’¡ ç†è§£æµä½œä¸ºæ¡ä»¶çš„ç²¾ç¡®ç­‰ä»·å…³ç³»ï¼š`while(cin >> i) â‰¡ while(!(cin >> i).fail())`

