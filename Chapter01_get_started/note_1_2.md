# 📘 1.2 Section — 初识I/O

> 本章笔记基于《C++ Primer》整理，汇总了简单 C++ 程序编译、运行流程，编译器选择以及退出状态相关知识。

---

## 🧠 本章核心概念

- ✆ 标准Input和output类
- ✆ IO实际使用
  - 输出运算符 `<<` 的工作机制
  - `std::endl` 与缓冲区刷新
  - 命名空间（如 `std::cout`）
  - 输入运算符 `>>` 的工作机制
- ✆ 程序退出状态的含义
- ✆ 常用编译选项（如 C++11）

---

## 🔍 知识点详解

### ✅ 标准Input和output类

C++并没有定义任何statment去做input或者output。但是它的<b>标准库 standard library</b>提供了IO。

在这本书里面我们使用`iostream`，其中有两基础类型在库里，分别是`istream`和`ostream`。**Stream** 的意思就是一系列的字符读取或者写入到IO设备上。

这个标准库定义了4个IO对像:
1. 处理输入，我们使用了`istream`类里面的对象``cin``也就是 **standard input**。
2. 同理，我们可以使用`ostream` 里的对象 `cout` 也就是 **standard output**。
3. 在 `ostream` 里面我们还有两个对象`cerr`和`clog`。 `cerr` 常常指的就是 **standard error** 报告报错信息。`clog` 就是报告代码执行的信息。



### ✅ 2. IO实际使用
以下是一个两个数字相加的例子:

```c
#include <iostream>
int main()
{
    std::cout << "Enter two numbers:" << std::endl;
    int v1 = 0, v2 = 0;
    std::cin >> v1 >> v2;
    std::cout << "The sum of " << v1 << " and " << v2
    << " is " << v1 + v2 << std::endl;
    return 0;
}
```
第一行中 `iostream` 就是一个**头文件(header)**, 每个程序必须用`#include`去声明其用到的库。

#### 🧾 输出运算符 `<<` 的工作机制

`<<` 是 C++ 中的输出运算符（称为“流插入运算符”），用于将数据输出到流对象中。

- **左操作数**：必须是一个输出流对象（如 `std::cout`）
- **右操作数**：是要输出的值（如字符串、数字等）。 如果， 链式输出有不同类型, `iostream` 库定义了不同的操作符来自动处理，比如:
```c 
std::cout << "The sum of " << v1 << " and " << v2 << " is " << v1 + v2 << std::endl; 
```

输出操作的结果是左操作数本身（即仍然是 `std::cout`），这使得我们可以**链式连续输出**多个内容。

例如：

```cpp
std::cout << "Enter two numbers:" << std::endl;
``` 

等价于：

```c
(std::cout << "Enter two numbers:") << std::endl;
```
也等价于:
```c
std::cout << "Enter two numbers:";
std::cout << std::endl;
```
这是合法的，是因为：

- 每个 << 运算符的左操作数始终是同一个输出流对象，这里是 `std::cout`；

- 第一个 `<<` 返回的是 `std::cout`，所以第二个 `<<` 也可以继续用这个返回值来输出。

第一个运算符将右边的字符串打印, 第二个运算符打印`endl`。这是一个特殊值被叫做**操纵符(manipulator)**。写入endl会结束这一行。

#### 🔧 `std::endl` 与缓冲区刷新

- `std::endl` 是一个特殊的 **流操纵符（manipulator）**。
- 它的作用有两个：
  1. 输出一个换行符（等同于 `\n`）；
  2. **刷新输出缓冲区**，确保所有输出立即写入终端或文件，而不是停留在内存中等待写入。

💡 刷新缓冲区的目的是：
> 防止程序崩溃时输出数据仍停留在缓冲区中，从而造成“未打印”的假象。

---

#### ⚠️ 警告提示（调试建议）

> 程序员在调试时常插入 `print` 输出语句。此时**应该总是刷新流**（使用 `std::endl` 或 `std::flush`），否则：
>
> - 如果程序崩溃，未刷新的输出可能仍在缓冲区中；
> - 这样会导致调试输出不完整，使你误判程序到底崩在哪一行。

所以调试时建议：
```cpp
std::cout << "Checkpoint A" << std::endl;  // 自动刷新
```

---

#### 🧾 命名空间（如 `std::cout`）
示例中我们使用 `std::cout` 和 `std::endl`，而不是直接写 `cout` 和 `endl`，这是因为它们都被定义在 **命名空间(namespace) `std`** 中。使用时，还需要**作用域运算符链接(scope operator) `::`** 来连接。 

命名空间是 C++ 提供的一种机制，好处是：
- 避免命名冲突（不同库可能定义了相同的名字）；
- 更明确；

标准库中的所有名字都定义在命名空间 `std` 内，因此使用时必须加前缀：

```cpp
std::cout << "Hello" << std::endl;
```
---

#### ⌨️ 输入运算符 `>>` 的工作机制

C++ 中的输入运算符 `>>`（右移运算符）用于从输入流中读取数据。

- **左操作数**：必须是一个输入流对象（如 `std::cin`）
- **右操作数**：是接收输入值的变量

它与输出运算符 `<<` 的行为类似：
- 从输入流中读取数据，并存储到右侧变量中；
- 返回左操作数（即输入流对象本身），允许**链式输入**。

---



